<div id="admin-index" class="admin-content">
  <div id="quick-links" class="clearfix">
    <h2><%= t('admin.sections.quick_links') %></h2>
    <ul class="unstyled">
      <% if can? :create, Post %><li class="posts-nav-link"><%= link_to (image_tag(image_path("icons/32x32/blog-post-add.png")) + '<br>'.html_safe + t('posts.new.title')), new_admin_post_path %></li><% end %>
      <% if can? :create, Page %><li class="pages-nav-link"><%= link_to (image_tag(image_path("icons/32x32/page-add.png")) + '<br>'.html_safe + t('pages.new.title')), new_admin_page_path %></li><% end %>
      <% if can? :create, Picture %><li class="pictures-nav-link"><%= link_to (image_tag(image_path("icons/32x32/image-add.png")) + '<br>'.html_safe + t('pictures.new.title')), new_admin_picture_path %></li><% end %>
      <% if can? :create, User %><li class="users-nav-link"><%= link_to (image_tag(image_path("icons/32x32/user-add.png")) + '<br>'.html_safe + t('users.new.title')), new_admin_user_path %></li><% end %>
    </ul>
  </div>
  <% if can? :create, Post %>
    <div id="quick-post">
      <h2><%= t("admin.sections.quick_post") %></h2>
      <%= simple_form_for [:admin, Post.new], :html => { :class => 'form-horizontal' } do |f| %>
        <fieldset>
          <%= f.input :title %>
          <%= insert_picture_button 'post_body' %>
          <%= f.input :body %>
          <%= f.input :user_id, :as => :hidden, :input_html => { :value => current_user.id } %>
        </fieldset>
        <div class="form-actions">
          <%= f.submit nil, :class => 'btn btn-primary right' %>
        </div>
      <% end %>
    </div>
  <% end %>
  <% if can? :read, :system_information %>
    <div id="rails-info">
      <h2><%= t('admin.sections.rails_info') %><% if Rails.env.production? %> <small>Deployed On: <%= Time.parse(Rails.root.to_s.split('/').last).strftime('%m-%d-%Y %H:%M:%S') %></small><% end %></h2>
      <%= Rails::Info.to_html.html_safe %>
    </div>
    <div id="routes">
      <h2><%= t('admin.sections.routes') %></h2>
      <pre>
        <ul class="unstyled">
          <% Rails::Application::RouteInspector.new.format(Rails.application.routes.routes, ENV['CONTROLLER']).each do |route| %>
            <li><%= route %></li>
          <% end %>
        </ul>
      </pre>
    </div>
    <div id="gems">
      <h2><%= t('admin.sections.gems') %></h2>
      <ul>
        <% get_gem_dependencies.each do |gem| %>
          <li>
            <%= gem[:name] %> (<%= gem[:version] %>)
            <% if gem[:dependencies].present? %>
              <ul>
                <% gem[:dependencies].each do |dependency| %>
                  <li><%= dependency[:name] %> (<%= dependency[:requirement] %>)</li>
                <% end %>
              </ul>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>
</div>
